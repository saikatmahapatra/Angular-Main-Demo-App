<div class="mb-8">
  <p-toolbar>
    <ng-template #start>
      <p-button label="New" icon="pi pi-plus" severity="secondary" class="mr-2" />
      <p-button severity="secondary" label="Delete" icon="pi pi-trash" outlined />
    </ng-template>
    <ng-template #end>
      <p-button label="Export" icon="pi pi-upload" severity="secondary" />
    </ng-template>
  </p-toolbar>
</div>
<p-toast position="top-left" key="tl" />
<div class="mb">
  <p-table [value]="userList" [tableStyle]="{ 'min-width': '50rem' }" dataKey="id" [rowHover]="true"
    [expandedRowKeys]="expandedRows" (onRowExpand)="onRowExpand($event)" (onRowCollapse)="onRowCollapse($event)">
    <ng-template #caption>
      <div class="flex flex-wrap justify-end gap-2">
        <p-button severity="secondary" label="Expand All" icon="pi pi-plus" text (onClick)="expandAll()" />
        <p-button severity="secondary" label="Collapse All" icon="pi pi-minus" text (onClick)="collapseAll()" />
      </div>
    </ng-template>
    <ng-template #header>
      <tr>
        <th scope="col"></th>
        <th scope="col">Name</th>
        <th scope="col">Email</th>
        <th scope="col">Phone</th>
        <th scope="col">Designation</th>
        <th scope="col">Department</th>
        <th scope="col">Status</th>
        <th scope="col">Action</th>
      </tr>
    </ng-template>
    <ng-template #body let-rowData let-expanded="expanded">
      <tr>
        <td>
          <p-button type="button" pRipple [pRowToggler]="rowData" [text]="true" severity="secondary" [rounded]="true"
            [icon]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'" />
        </td>
        <td>{{rowData?.user_full_name}}</td>
        <td>{{rowData.user_email}}</td>
        <td>{{rowData.user_phone}}</td>
        <td>{{rowData.designation_name}}</td>
        <td>{{rowData.department_name}}</td>
        <td>{{rowData.user_status}}</td>
        <td>
          BTN
        </td>
      </tr>
    </ng-template>
    <ng-template #expandedrow let-moreData>
      <tr>
        <td colspan="8">
          {{moreData | json}}
        </td>
      </tr>
    </ng-template>
    <ng-template #emptymessage>
      <tr>
        <td colspan="8">There are no records to display.</td>
      </tr>
    </ng-template>
  </p-table>
  @if (totalRecords > 0) {
  <p-paginator [rows]="itemPerPage" [first]="first" [totalRecords]="totalRecords"
    [rowsPerPageOptions]="itemPerPageDropdown" [showCurrentPageReport]="true"
    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
    (onPageChange)="paginate($event)"></p-paginator>
  }
</div>